<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сложение чисел</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/calc.css">
    <link rel="stylesheet" href="styles/remadd_button.css">
</head>

<body>
    <div class="container">
        <h1 class="title">Сложение чисел:</h1>

        <div class="calculator">
            <input type="number" class="input-field" id="num1" value="0">
            <span class="operator">+</span>
            <input type="number" class="input-field" id="num2" value="0">
            <span class="operator">=</span>
            <div class="result-frame" id="result">0</div>
        </div>

        <div class="add-term-container">
            <div class="composite-frame">
                <button class="frame-button" id="remove-term">-</button>
                <div class="frame-label">Добавить слагаемое</div>
                <button class="frame-button" id="add-term">+</button>
            </div>
        </div>

        <div class="dynamic-inputs" id="dynamic-inputs">
        </div>
    </div>

    <script>
        const num1 = document.getElementById('num1');
        const num2 = document.getElementById('num2');
        const result = document.getElementById('result');

        function calculateSum() {
            const sum = parseInt(num1.value) + parseInt(num2.value);
            result.textContent = isNaN(sum) ? 'Ошибка' : sum;
        }
        num1.addEventListener('input', calculateSum);
        num2.addEventListener('input', calculateSum);
    </script>

    <script> //скрипт для добавления слогаемых
        const addTermBtn = document.getElementById('add-term');
        const removeTermBtn = document.getElementById('remove-term');
        const dynamicInputs = document.getElementById('dynamic-inputs');
        let inputCount = 0;

        function addInputField() {
            inputCount++;
            const row = document.createElement('div');
            row.className = 'dynamic-row';

            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-btn';
            removeBtn.innerHTML = '<i class="fas fa-times"></i>';
            removeBtn.onclick = function () {
                row.remove();
                updateCalculation();
            };

            const input = document.createElement('input');
            input.type = 'number';
            input.className = 'input-field';
            input.value = '0';
            input.addEventListener('input', updateCalculation);

            const operator = document.createElement('span');
            operator.className = 'operator';
            operator.textContent = '+';

            row.appendChild(removeBtn);
            row.appendChild(input);
            row.appendChild(operator);

            dynamicInputs.appendChild(row);
            updateCalculation();
        }

        function removeInputField() {
            if (inputCount > 0) {
                const lastRow = dynamicInputs.lastElementChild;
                if (lastRow) {
                    lastRow.remove();
                    inputCount--;
                    updateCalculation();
                }
            }
        }

        function updateCalculation() {
            let sum = parseInt(num1.value) + parseInt(num2.value);
            const dynamicInputs = document.querySelectorAll('.dynamic-row input');
            dynamicInputs.forEach(input => {
                sum += parseInt(input.value);
            });
            result.textContent = isNaN(sum) ? 'Ошибка' : sum;
        }
        addTermBtn.addEventListener('click', addInputField);
        removeTermBtn.addEventListener('click', removeInputField);

        calculateSum();
    </script>
</body>

</html>