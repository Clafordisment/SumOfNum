<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сложение чисел</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/calc.css">
    <link rel="stylesheet" href="styles/remadd_button.css">
</head>

<body>
    <div class="container">
        <h1 class="title">Сложение чисел:</h1>

        <div class="calculator">
            <input type="number" class="input-field" id="num1" value="0">
            <span class="operator">+</span>
            <input type="number" class="input-field" id="num2" value="0">
            <span class="operator">=</span>
            <div class="result-frame" id="result">0</div>
        </div>

        <div class="add-term-container">
            <div class="composite-frame">
                <button class="frame-button" id="remove-term">-</button>
                <div class="frame-label">Добавить слагаемое</div>
                <button class="frame-button" id="add-term">+</button>
            </div>
        </div>

        <div class="dynamic-inputs" id="dynamic-inputs">
        </div>
    </div>

    <script>
        'use strict'
        const num1 = document.getElementById('num1');
        const num2 = document.getElementById('num2');
        const result = document.getElementById('result');

        function calculateSum() {
            const sum = parseInt(num1.value) + parseInt(num2.value);
            result.textContent = isNaN(sum) ? 'Ошибка' : sum;
        }
        num1.addEventListener('input', calculateSum);
        num2.addEventListener('input', calculateSum);
    </script>

    <script> //скрипт для добавления слогаемых
        'use strict'
        const elements = {
            addTerm: document.getElementById('add-term'),
            removeTerm: document.getElementById('remove-term'),
            dynamicInputs: document.getElementById('dynamic-inputs'),
            num1: document.getElementById('num1'),
            num2: document.getElementById('num2'),
            result: document.getElementById('result')
        };

        const updateCalculation = () => {
            const baseSum = [elements.num1, elements.num2]
                .reduce((sum, el) => sum + (parseInt(el.value) || 0), 0);

            const dynamicSum = Array.from(elements.dynamicInputs.querySelectorAll('input'))
                .reduce((sum, input) => sum + (parseInt(input.value) || 0), 0);

            elements.result.textContent = baseSum + dynamicSum;
        };

        const addInputField = () => {
            const row = document.createElement('div');
            row.className = 'dynamic-row';
            row.innerHTML = `
        <button class="remove-btn" onclick="this.parentElement.remove(); updateCalculation()">
            <i class="fas fa-times"></i>
        </button>
        <input type="number" class="input-field" value="0">
        <span class="operator">+</span>
    `;
            row.querySelector('input').addEventListener('input', updateCalculation);
            elements.dynamicInputs.appendChild(row);
            updateCalculation();
        };

        const removeInputField = () => {
            elements.dynamicInputs.lastElementChild?.remove();
            updateCalculation();
        };

        // Инициализация
        elements.addTerm.addEventListener('click', addInputField);
        elements.removeTerm.addEventListener('click', removeInputField);
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', updateCalculation);
        });
        updateCalculation();
    </script>
    </script>
</body>

</html>